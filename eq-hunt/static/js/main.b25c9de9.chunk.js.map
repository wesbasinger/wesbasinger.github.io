{"version":3,"sources":["abi.js","index.js"],"names":["abi","Web3","require","getWeb3","givenProvider","getContractInstance","window","ethereum","enable","eth","Contract","Index","props","state","id","locked","handleChange","bind","contract","methods","call","result","this","setState","e","target","value","to","htmlFor","type","onChange","React","Component","Solve","repr","answer","solvers","handleSubmit","getEquation","match","params","equation","getSolvers","String","raw","console","log","web3","getAccounts","addresses","solve","Number","send","from","self","dangerouslySetInnerHTML","__html","katex","renderToString","throwOnError","name","onClick","map","solver","key","Rules","ReactDOM","render","basename","exact","path","component","document","getElementById"],"mappings":"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","file":"static/js/main.b25c9de9.chunk.js","sourcesContent":["const abi = [\n\t{\n\t\t\"inputs\": [],\n\t\t\"payable\": true,\n\t\t\"stateMutability\": \"payable\",\n\t\t\"type\": \"constructor\"\n\t},\n\t{\n\t\t\"payable\": true,\n\t\t\"stateMutability\": \"payable\",\n\t\t\"type\": \"fallback\"\n\t},\n\t{\n\t\t\"constant\": false,\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\"name\": \"_id\",\n\t\t\t\t\"type\": \"string\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\"name\": \"_repr\",\n\t\t\t\t\"type\": \"string\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"internalType\": \"int256\",\n\t\t\t\t\"name\": \"_answer\",\n\t\t\t\t\"type\": \"int256\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"create\",\n\t\t\"outputs\": [],\n\t\t\"payable\": false,\n\t\t\"stateMutability\": \"nonpayable\",\n\t\t\"type\": \"function\"\n\t},\n\t{\n\t\t\"constant\": true,\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\"name\": \"_id\",\n\t\t\t\t\"type\": \"string\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"getEquation\",\n\t\t\"outputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\"name\": \"\",\n\t\t\t\t\"type\": \"string\"\n\t\t\t}\n\t\t],\n\t\t\"payable\": false,\n\t\t\"stateMutability\": \"view\",\n\t\t\"type\": \"function\"\n\t},\n\t{\n\t\t\"constant\": true,\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\"name\": \"_id\",\n\t\t\t\t\"type\": \"string\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"getNumSolvers\",\n\t\t\"outputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\"name\": \"\",\n\t\t\t\t\"type\": \"uint256\"\n\t\t\t}\n\t\t],\n\t\t\"payable\": false,\n\t\t\"stateMutability\": \"view\",\n\t\t\"type\": \"function\"\n\t},\n\t{\n\t\t\"constant\": true,\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\"name\": \"_id\",\n\t\t\t\t\"type\": \"string\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"getSolvers\",\n\t\t\"outputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"address[]\",\n\t\t\t\t\"name\": \"\",\n\t\t\t\t\"type\": \"address[]\"\n\t\t\t}\n\t\t],\n\t\t\"payable\": false,\n\t\t\"stateMutability\": \"view\",\n\t\t\"type\": \"function\"\n\t},\n\t{\n\t\t\"constant\": true,\n\t\t\"inputs\": [],\n\t\t\"name\": \"lastSolveTime\",\n\t\t\"outputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\"name\": \"\",\n\t\t\t\t\"type\": \"uint256\"\n\t\t\t}\n\t\t],\n\t\t\"payable\": false,\n\t\t\"stateMutability\": \"view\",\n\t\t\"type\": \"function\"\n\t},\n\t{\n\t\t\"constant\": true,\n\t\t\"inputs\": [],\n\t\t\"name\": \"locked\",\n\t\t\"outputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"bool\",\n\t\t\t\t\"name\": \"\",\n\t\t\t\t\"type\": \"bool\"\n\t\t\t}\n\t\t],\n\t\t\"payable\": false,\n\t\t\"stateMutability\": \"view\",\n\t\t\"type\": \"function\"\n\t},\n\t{\n\t\t\"constant\": false,\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\"name\": \"_id\",\n\t\t\t\t\"type\": \"string\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"internalType\": \"int256\",\n\t\t\t\t\"name\": \"_answer\",\n\t\t\t\t\"type\": \"int256\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"solve\",\n\t\t\"outputs\": [],\n\t\t\"payable\": true,\n\t\t\"stateMutability\": \"payable\",\n\t\t\"type\": \"function\"\n\t},\n\t{\n\t\t\"constant\": true,\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\"name\": \"\",\n\t\t\t\t\"type\": \"string\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\"name\": \"\",\n\t\t\t\t\"type\": \"uint256\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"solvers\",\n\t\t\"outputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"address\",\n\t\t\t\t\"name\": \"\",\n\t\t\t\t\"type\": \"address\"\n\t\t\t}\n\t\t],\n\t\t\"payable\": false,\n\t\t\"stateMutability\": \"view\",\n\t\t\"type\": \"function\"\n\t},\n\t{\n\t\t\"constant\": false,\n\t\t\"inputs\": [],\n\t\t\"name\": \"withdraw\",\n\t\t\"outputs\": [],\n\t\t\"payable\": true,\n\t\t\"stateMutability\": \"payable\",\n\t\t\"type\": \"function\"\n\t}\n];\n\nexport default abi;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport katex from 'katex';\n\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\n\nimport abi from './abi';\n\nconst Web3 = require(\"web3\");\n\nconst address = \"0xe559835d7979dae994331defaec2fba057e56c27\";\n\nconst getWeb3 = () => {\n  return new Web3(Web3.givenProvider);\n}\n\nconst getContractInstance = () => {\n  window.ethereum.enable();\n  const web3 = getWeb3();\n  return new web3.eth.Contract(abi, address);\n}\n\nclass Index extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: \"\",\n      locked: true\n    }\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  async componentDidMount() {\n    const contract = getContractInstance();\n    const result = await contract.methods.locked().call();\n    this.setState({\n      locked: result\n    })\n  }\n\n  handleChange(e) {\n    this.setState({\n      id: e.target.value\n    })\n  }\n\n  render() {\n\n    return(\n      <div>\n        <h1>Equation Hunt</h1>\n        <Link to=\"/rules\">Rules</Link>\n        <h2>\n          Contract is currently: {\n            this.state.locked ? \"LOCKED\" : \"UNLOCKED\"\n          }\n        </h2>\n        <h2>Lookup</h2>\n        <p>Enter the ID found at the cache to lookup the associated equation.</p>\n        <label htmlFor=\"id\">ID:</label>\n        <input type=\"text\" value={this.state.id} onChange={this.handleChange} />\n        <button><Link to={`/solve/${this.state.id}`}>Lookup</Link></button>\n      </div>\n    )\n  }\n}\n\nclass Solve extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      repr : \"loading...\",\n      answer: \"\",\n      solvers: []\n    }\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  async componentDidMount() {\n    const contract = getContractInstance();\n    const equation = await contract.methods.getEquation(this.props.match.params.id).call();\n    const solvers = await contract.methods.getSolvers(this.props.match.params.id).call();\n    this.setState({\n      repr: String.raw`${equation}`,\n      solvers: solvers\n    });\n\n    console.log(this.state.repr)\n\n    if(this.state.repr === \"\" ) {\n      this.setState({\n        repr : `∅`\n      })\n    }\n  }\n\n  handleChange(e) {\n    this.setState({answer: e.target.value})\n  }\n\n  async handleSubmit(e) {\n    // 3 possible scenarios\n    // Solves correctly for first timeout\n    // Solve correctly but has already hasSolved REVERT\n    // Solves incorrectly REVERT\n    const web3 = getWeb3();\n    const addresses = await web3.eth.getAccounts();\n    const contract = getContractInstance();\n    contract.methods.solve(this.props.match.params.id, Number(this.state.answer))\n      .send({from: addresses[0]});\n    this.setState({answer: \"\"});\n  }\n\n\n  render() {\n\n    const self = this;\n\n\n    function createMarkup() {\n\n\n      return {\n        __html: katex.renderToString(String.raw`${self.state.repr}`, {\n            throwOnError: false\n                })\n      };\n    }\n\n    return(\n      <div>\n\n        <h1>Solve for {this.props.match.params.id}</h1>\n\n\n\n        <h1>\n          <div dangerouslySetInnerHTML={createMarkup()} />\n        </h1>\n\n        <label htmlFor=\"answer\">Answer:</label>\n        <input type=\"number\" name=\"answer\" value={this.state.answer} onChange={this.handleChange}/>\n        <button onClick={this.handleSubmit}>Check</button>\n        <h2>Previous Solvers</h2>\n        <ul>\n          {\n            this.state.solvers.map((solver) => {\n              return(\n                <li key={solver}>{solver}</li>\n              )\n            })\n          }\n        </ul>\n        <Link to=\"/\">Back to lookup</Link>\n      </div>\n    )\n  }\n}\n\nconst Rules = () => {\n  return(\n    <div>\n      <h1>Rules</h1>\n      <p>\n        Please observe the following out of courtesy.\n      </p>\n        <ol>\n          <li>Cache ID must be found at the site.</li>\n          <li>Solve for reward only one time.</li>\n          <li>Please do not give out the cache IDs or answers.</li>\n        </ol>\n      <Link to=\"/\">Back to lookup</Link>\n    </div>\n  )\n}\n\nconst App = () => {\n\n  return(\n    <Router basename=\"/eq-hunt\">\n      <Switch>\n        <Route exact path=\"/\">\n          <Index />\n        </Route>\n        <Route path=\"/solve/:id\" component={Solve} />\n        <Route path=\"/rules\">\n          <Rules />\n        </Route>\n      </Switch>\n    </Router>\n  )\n}\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}